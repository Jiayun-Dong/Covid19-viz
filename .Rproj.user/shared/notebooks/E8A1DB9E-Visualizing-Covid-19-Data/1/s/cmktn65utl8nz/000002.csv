"0","# read JHU data"
"0","df_raw = as.data.frame(read.csv(file=""time_series_covid19_confirmed_global.csv"", head = TRUE, sep ="",""))"
"0",""
"0","# data cleaning"
"0","    # separate Hubei from mainland China and name change of some observations"
"0","    dat_international = df_raw %>% "
"0","      mutate(Country.Region = if_else(Province.State == ""Hubei"", ""Hubei"", as.character(Country.Region)),"
"0","             Country.Region = if_else(Province.State == ""Hong Kong"", ""Hong Kong"", as.character(Country.Region)),"
"0","             Country.Region = if_else(Province.State == ""Macau"", ""Macao"", as.character(Country.Region)),"
"0","             Country.Region = if_else(Country.Region == ""Taiwan*"", ""Taiwan"", as.character(Country.Region)),"
"0","             Country.Region = if_else(Country.Region == ""China"", ""China ex Hubei"", as.character(Country.Region)),"
"0","             Country.Region = if_else(Country.Region == ""United Kingdom"", ""UK"", as.character(Country.Region)),"
"0","             Country.Region = if_else(Country.Region == ""Korea, South"", ""South Korea"", as.character(Country.Region))) %>%"
"0","      filter(Country.Region != ""Diamond Princess"")"
"0","    "
"0","    # sum(is.na(dat_international))  # check for missing values"
"0","    "
"0","    # aggregate data by country, drop location"
"0","    dat_international = dat_international %>%"
"0","      select(-c(Lat, Long, Province.State)) %>%"
"0","      group_by(Country.Region) %>% "
"0","      # summarise_all(funs(sum), na.rm = TRUE)"
"0","      summarise_all(list(~ sum(., na.rm = TRUE)))"
"0","    "
"0","    "
"0","    # convert to tidy panel data"
"0","    dat_international = gather(dat_international, ""date"", ""cases"", 2:ncol(dat_international))"
"0","    "
"0","    # date format"
"0","    dat_international = dat_international %>% "
"0","      group_by(Country.Region) %>%"
"0","      mutate(date_index = row_number(),"
"0","             date = as.Date(""2020-01-22"") + date_index - 1) %>%  # data available from 1/22/2020"
"0","      select(-date_index)"
