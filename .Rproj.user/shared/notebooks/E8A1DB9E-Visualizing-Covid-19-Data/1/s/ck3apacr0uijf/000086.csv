"0","# visualization parameter"
"0","xmax = ceiling(max(df_event$day)/5) * 5"
"0","ymax = max(df_event$cases) *1.1"
"0","country_list = c(""China ex Hubei"", ""Hubei"", ""South Korea"", ""Italy"", ""US"", ""Japan"", ""Singapore"", ""UK"", ""Germany"", ""Hong Kong"", ""Spain"", ""Canada"", ""Taiwan"", ""Australia"")"
"0","recent_date = as.Date(as.POSIXlt(Sys.time(), tz = ""UTC"")) - 1"
"0",""
"0","# adjust no update issue on 3/13: interpolation using average growth rate between 3/12 and 3/14"
"0","df_event = df_event %>%"
"0","  mutate(cases = if_else(Country.Region %in% country_list & cases - lag(cases) <= 2 & !is.na(lead(cases)) & !is.na(lag(cases)),"
"0","                         (as.double(lag(cases)) * as.double(lead(cases)))^0.5, as.double(cases)))"
"0",""
"0","ggplot(data = df_event %>% filter(Country.Region %in% country_list), aes(x = day, y = cases)) +"
"0","  geom_line(aes(color = Country.Region)) + "
"0","  scale_y_log10(breaks = c(100, 500, 1000, 5000, 10000, 50000, 100000, 500000, 1000000), "
"0","                minor_breaks = NULL,"
"0","                labels = scales::comma,"
"0","                limits = c(100, ymax)) +"
"0","  scale_x_continuous(breaks = seq(from = 0, to = xmax, by = 5), limits = c(0, xmax)) +"
"0","  xlab(paste0(""Days since confirmed cases reached 100 \n (JHU Data, available from 2020-01-22, updated at "", recent_date, "" 23:59 UTC)"")) + ylab(""Number of confirmed cases"") +"
"0","  geom_dl(aes(label = Country.Region), method = list(dl.trans(x = x - 0.1), ""last.points"", cex = 0.8)) +  # add labels next to the curve"
"0","  theme_minimal() + theme(legend.position = ""bottom"") +"
"0","  ggtitle(""Trajectories of Selected Countries and Regions"")"
