"0","# visualization parameter"
"0","x_max = ceiling(max(df_event$day)/5) * 5"
"0","y_max = max(df_event$cases) *1.05"
"0","country_list = c(""China ex Hubei"", ""Hubei"", ""South Korea"", ""Iran"", ""Italy"", ""US"", ""Japan"", ""Singapore"", ""UK"", ""Germany"", ""Hong Kong"", ""Spain"", ""France"", ""Canada"", ""Taiwan"", ""Australia"")"
"0","recent_date = as.Date(as.POSIXlt(Sys.time(), tz = ""UTC"")) - 1"
"0",""
"0","# adjust no update issue on 3/13"
"0","df_event = df_event %>%"
"0","  mutate(cases = if_else(Country.Region %in% country_list & cases - lag(cases) <= 2 & !is.na(lead(cases)) & !is.na(lag(cases)),"
"0","                         (as.double(lag(cases)) * as.double(lead(cases)))^0.5, as.double(cases)))"
"0",""
"0","ggplot(data = df_event %>% filter(Country.Region %in% country_list), aes(x = day, y = cases)) +"
"0","  geom_line(aes(color = Country.Region), size = 0.75) + "
"0","  # geom_vline(xintercept = 0, linetype = ""dashed"", color = ""gray"", size=0.55) +"
"0","  scale_y_log10(breaks = c(100, 1000, 10000, 100000), "
"0","                minor_breaks = c(seq(from = 100, to = 1000, length.out = 6), seq(from = 1000, to = 10000, length.out = 6),"
"0","                                 seq(from = 10000, to = 100000, length.out = 6)), "
"0","                labels = scales::comma,"
"0","                limits = c(100, y_max)) +"
"0","  scale_x_continuous(breaks = seq(from = 0, to = x_max, by = 5), limits = c(0, x_max)) +"
"0","  xlab(paste0(""Days since confirmed cases reached 100 \n (JHU Data, available from 2020-01-22, updated at "", recent_date, "" 23:59 UTC)"")) + "
"0","  ylab(""Number of confirmed cases"") +"
"0","  geom_dl(aes(label = Country.Region), method = list(dl.trans(x = x - 0.1), ""last.points"", cex = 0.8)) +"
"0","  theme_minimal() + theme(legend.position = ""bottom"")"
