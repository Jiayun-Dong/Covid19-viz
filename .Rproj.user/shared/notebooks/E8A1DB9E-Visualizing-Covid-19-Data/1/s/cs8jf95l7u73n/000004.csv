"0","# read COVID-TRACKING data"
"0","dat = as.data.frame(fromJSON(""https://covidtracking.com/api/states/daily"")) %>%  "
"0","  select(state, date, positive, negative, pending, death, total) %>%"
"0","  mutate(date = as.Date(as.character(date), format = ""%Y%m%d""),"
"0","         death = if_else(is.na(death), 0, as.double(death)),"
"0","         pending = if_else(is.na(pending), 0, as.double(pending)),"
"0","         negative = if_else(is.na(negative), 0, as.double(negative)),"
"0","         totalTestResults = total - pending) %>%  # excluding tests with pending results"
"0","  arrange(state, date) %>%"
"0","  select(-total)"
"0",""
"0","# read US population data"
"0","dat_pop = read.csv(file=""StatePopulations.csv"", head = TRUE, sep ="","") %>% "
"0","  mutate(state_abbrev = as.character(state_abbrev)) %>%"
"0","  select(state = state_abbrev, population = X2018.Population)"
"0",""
"0","# join datafreames"
"0","dat = dat %>%"
"0","  left_join(dat_pop, by = c(""state"" = ""state"")) %>%"
"0","  mutate(positive_per_million_pop = round(positive / population * 1000000),"
"0","         death_per_million_pop = round(death / population * 1000000),"
"0","         test_per_million_pop = round(totalTestResults / population * 1000000))"
